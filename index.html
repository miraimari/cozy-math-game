<!-- Avatar Selection Screen -->
<div id="avatar-screen" style="display:none;">
  <h2>Choose Your Avatar</h2>
  <div id="avatar-selection" style="display:flex; gap:20px;">
    <img id="avatar1" src="" alt="Avatar 1" onclick="selectAvatar(0)" style="width:100px; cursor:pointer; border:3px solid transparent;">
    <img id="avatar2" src="" alt="Avatar 2" onclick="selectAvatar(1)" style="width:100px; cursor:pointer; border:3px solid transparent;">
    <img id="avatar3" src="" alt="Avatar 3" onclick="selectAvatar(2)" style="width:100px; cursor:pointer; border:3px solid transparent;">
  </div>
  <button onclick="backToLoad()">Back</button>
</div>

<script>
const avatarUrls = [
  "https://raw.githubusercontent.com/miraimari/cozy-math-game/main/avatar1.jpg",
  "https://raw.githubusercontent.com/miraimari/cozy-math-game/main/avatar2.jpg",
  "https://raw.githubusercontent.com/miraimari/cozy-math-game/main/avatar3.jpg"
];

// Populate images
avatarUrls.forEach((url, index) => {
  document.getElementById(`avatar${index + 1}`).src = url;
});

// Load previously selected avatar
function loadAvatar(username) {
  const avatarIndex = localStorage.getItem(`${username}-avatar`);
  if (avatarIndex !== null) {
    return avatarUrls[avatarIndex];
  }
  return avatarUrls[0]; // default avatar
}

// Select avatar function
function selectAvatar(index) {
  if (!currentUsername) {
    alert("Please enter your name first.");
    return;
  }
  localStorage.setItem(`${currentUsername}-avatar`, index);
  
  // Highlight selection
  avatarUrls.forEach((_, i) => {
    document.getElementById(`avatar${i + 1}`).style.border = i === index ? "3px solid green" : "3px solid transparent";
  });
}

// Show avatar screen
function showAvatarScreen() {
  document.getElementById("load-screen").style.display = "none";
  document.getElementById("avatar-screen").style.display = "block";

  // Highlight previously selected avatar if any
  const avatarIndex = localStorage.getItem(`${currentUsername}-avatar`);
  avatarUrls.forEach((_, i) => {
    document.getElementById(`avatar${i + 1}`).style.border = i == avatarIndex ? "3px solid green" : "3px solid transparent";
  });
}

// Go back to load screen
function backToLoad() {
  document.getElementById("avatar-screen").style.display = "none";
  document.getElementById("load-screen").style.display = "block";
}
</script>
